local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local Window = WindUI:CreateWindow({
    Title = "CxHub",
    Icon = "door-open", -- lucide icon
    Author = "discord.gg/cgSVQ9jGDx",
    Folder = "Trap Run",
    
    -- ↓ This all is Optional. You can remove it.
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Dark",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    
})

local MainTab = Window:Tab({
    Title = "Main",
    Icon = "magic-stick-linear", -- optional
    Locked = false,
})

local trapLoop

local Toggle = MainTab:Toggle({
    Title = "Trap ESP",
    Desc = "show / hide",
    Icon = "check-read-outline",
    Type = "Checkbox",
    Value = false,

    Callback = function(state)
        flying = false

        if state then
            trapLoop = true

            task.spawn(function()
                while trapLoop do
                    local trapsFolder = workspace:FindFirstChild("Game")

                    if trapsFolder then
                        trapsFolder = trapsFolder:FindFirstChild("Traps")

                        if trapsFolder then
                            for _, obj in ipairs(trapsFolder:GetDescendants()) do
                                if obj:IsA("BasePart") or obj:IsA("Decal") then
                                    if obj.Transparency == 1 then
                                        obj.Transparency = 0
                                    end
                                end
                            end
                        end
                    end

                    task.wait(0.5)
                end
            end)

        else
            trapLoop = false
        end
    end
})

local hitboxLoop = false
local originalSizes = {}

local HitboxToggle = MainTab:Toggle({
    Title = "Hitbox",
    Desc = "Increase / Decrease",
    Icon = "check-read-outline",
    Type = "Checkbox",
    Value = false,

    Callback = function(state)
        hitboxLoop = state

        if state then
            task.spawn(function()
                while hitboxLoop do
                    for _, player in ipairs(game.Players:GetPlayers()) do
                        if player ~= game.Players.LocalPlayer then
                            local char = player.Character
                            if char then
                                local hrp = char:FindFirstChild("HumanoidRootPart")
                                if hrp then
                                    if not originalSizes[hrp] then
                                        originalSizes[hrp] = hrp.Size
                                    end

                                    hrp.Size = Vector3.new(16,16,16)
                                    hrp.Transparency = 0.5
                                    hrp.CanCollide = false
                                end
                            end
                        end
                    end
                    task.wait(0.3)
                end
            end)

        else
            -- eski haline döndür
            for hrp, size in pairs(originalSizes) do
                if hrp and hrp.Parent then
                    hrp.Size = size
                    hrp.Transparency = 1
                    hrp.CanCollide = false
                end
            end
            originalSizes = {}
        end
    end
})
